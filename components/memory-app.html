<!-- ==================== MEMORY APP ==================== -->
<div id="memory-app" class="absolute inset-0 z-50 flex flex-col hidden pt-0 overflow-hidden bg-[#F2F2F7]">
    <!-- Header -->
    <div class="h-24 bg-[#F7F7F7] px-6 pt-10 flex justify-between items-center shrink-0 border-b border-[#E5E5E5]">
        <button id="close-memory-btn" class="text-black"><i class="fa-solid fa-chevron-left text-lg"></i></button>
        <h1 class="text-black font-bold text-xl tracking-wide">记忆时间轴</h1>
        <div class="w-6"></div>
    </div>

    <!-- Character Selection (Initial View) -->
    <div id="memory-char-select" class="flex-1 overflow-y-auto p-4">
        <p class="text-sm text-gray-500 mb-4 text-center">选择一个角色查看其记忆</p>
        <div id="memory-char-list" class="space-y-3">
            <!-- Character cards will be injected here -->
        </div>
    </div>

    <!-- Memory Timeline (After selecting character) -->
    <div id="memory-timeline" class="hidden flex-1 flex flex-col overflow-hidden">
        <div class="p-4 bg-white border-b border-gray-200 flex items-center gap-3 shrink-0">
            <button onclick="MemoryApp.backToCharSelect()" class="text-gray-600"><i class="fa-solid fa-chevron-left"></i></button>
            <img id="memory-current-avatar" src="" class="w-10 h-10 rounded-full object-cover">
            <div class="flex-1">
                <h3 id="memory-current-name" class="font-bold text-gray-800"></h3>
                <p class="text-xs text-gray-400">记忆总数: <span id="memory-count">0</span></p>
            </div>
            <button onclick="MemoryApp.addManualMemory()" class="bg-blue-500 text-white px-3 py-1.5 rounded-lg text-xs font-bold active:scale-95 transition mr-2"><i class="fa-solid fa-plus"></i></button>
            <button onclick="MemoryApp.triggerSummary()" class="bg-orange-500 text-white px-3 py-1.5 rounded-lg text-xs font-bold active:scale-95 transition">立即总结</button>
        </div>
        
        <div id="memory-cards-container" class="flex-1 overflow-y-auto p-4 space-y-4">
            <!-- Memory cards will be injected here -->
        </div>
    </div>
</div>
